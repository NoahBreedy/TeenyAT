;--------
;  It may not be proper for me to have the preproccessor grammar here
;  since our bottom level parser dosent actually recieve these tokens
;--------

<program> ::= <line>* T_EOL

<line>    ::= <pp_directive>
            | <statement>
            | T_EOL

<statement> ::= <statement_body> T_EOL

<statement_body> ::= <label_line>
                   | <code_line>

<pp_directive> ::= T_AT_DIRECTIVE <pp_identifier> T_EOL

<pp_arg>   ::= T_STRING
             | T_NUMBER
             | T_LABEL
             | T_IDENTIFIER

;--------
; I dont pass these in as tokens since its simpler
; to handle this as terminal strings
;--------
<pp_identifier> ::= "ifdef"    T_IDENTIFIER
                  | "ifndef"   T_IDENTIFIER
                  | "endif"
                  | "define"   T_IDENTIFIER <pp_arg>?
                  | "undefine" T_IDENTIFIER
                  | "include"  T_STRING

<label_line> ::= T_LABEL

<number> ::= <plus_or_minus> T_NUMBER
           | T_IDENTIFIER
           | T_NUMBER

<raw_value> ::=  <number>
              |  T_CHARACTER

<immediate> ::=  <raw_value>
              |  T_LABEL

<plus_or_minus> ::= T_PLUS
                  | T_MINUS

<register_and_immediate> ::= T_REGISTER <includes_immediate>
                           | <immediate> <includes_register>

;------
; I put ε isntead of T_EOL since its already satisfied by <statement>
;------
<includes_immediate> ::= <plus_or_minus> <immediate>
                       | ε

<includes_register> ::= T_PLUS T_REGISTER
                      | ε

<code_line> ::= <set_instruction>

<set_instruction> ::= T_SET T_REGISTER T_COMMA <register_and_immediate>
